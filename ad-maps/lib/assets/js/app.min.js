"use strict";jQuery(function(t){function a(){function a(t){var a=[];return i.forEach(function(e){var n={name:e,value:t[e]};a.push(n)}),a}function e(t){console.log(t),p.datum(r[t]),console.log(t),console.log(r[t].map(function(t){return t.name+" "+t.value})),console.log("----"),m=m.data(l),m.select("path").transition().duration(750).attrTween("d",n),m.select("text").style("opacity",0).attr("transform",function(t){return"translate("+f.centroid(t)+")"}).text(function(t){return t.data.value}).transition().delay(250).style("opacity",function(t){return t.data.value?1:0})}function n(t){var a=d3.interpolate(this._current,t);return this._current=a(0),function(t){return f(a(t))}}var r=[],o="all",i=["yes","no","abstain"];map_data.forEach(function(t){r[t.id]=a(t.data),console.log(t.id)});var u=t("#summary-chart").innerWidth(),c=u,s=Math.min(u,c)/2,d=["#009B37","#F00601","#0049AA","#ffffff"];t("[data-label]").each(function(a,e){t(e).find(".square").css({color:d[a]})});var d=d3.scale.linear().domain([0,100]).range([d3.rgb("#009B37"),d3.rgb("#FFE100"),d3.rgb("#F00601")]),l=(d3.scale.threshold().domain([.4,.5,.6]).range(["#ca0020","#f4a582","#92c5de","#0571b0"]),d3.layout.pie().value(function(t){return t.value}).sort(null)),f=d3.svg.arc().innerRadius(0).outerRadius(s-20),p=d3.select("#summary-chart").append("svg").attr("width",u).attr("height",c).append("g").attr("transform","translate("+u/2+","+c/2+")"),m=p.datum(r[o]).selectAll("g").data(l).enter().append("g");m.append("path").attr("class",function(t){return"arc "+t.data.name}).attr("d",f).each(function(t){this._current=t});m.append("text").attr("transform",function(t){return"translate("+f.centroid(t)+")"}).attr("text-anchor","middle").attr("font-size","1.5em").text(function(t){return t.data.value});var h=t("#map-text p").text();t("#map-text ol");t(".region").on("mouseover mouseout",function(a){var n=t(a.currentTarget),r=void 0,i=t(this).attr("id"),u=t(this).data("name"),c=t("#map-text p"),s=map_data.filter(function(t){return t.id==i}).pop().text;"mouseover"==a.type?(n.hasClass("p-nodata")?(r=u+"<br>brak danych",t(".summary-chart").css({opacity:0})):(e(i),r="undefined"!=typeof s?s:u),t(".region").css({opacity:.3}),n.css({opacity:1}),console.log(n[0].getBBox())):"mouseout"==a.type&&(e(o),r=h,t(".region, .summary-chart").css({opacity:1})),c.html("<h3>"+r+"</h3>")})}"undefined"!=typeof map_data&&(t("#map").addClass("ok"),a(),t(".sequential").each(function(a,e){var n=t(e),r=n.data("seq");n.delay(200*r).fadeTo(300,1)}))});